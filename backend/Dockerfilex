FROM debian:bookworm-slim

RUN apt update \
    && apt install python3.11-venv nginx systemctl -y \
    && apt clean

RUN python3 -m venv app

WORKDIR /app

RUN python3 sh.sh('-c', 'source bin/activate')

COPY . .

RUN bin/pip install --no-cache-dir -r requirements.txt

RUN mv ./nginx.conf /etc/nginx/nginx.conf

CMD ["sh", "launch.sh"]
# CMD ["pyhton3", "manage.py", "runserver", "0.0.0.0:8000"]
# CMD ["daphne", "-b", "0.0.0.0", "-p", "8000", "backend.asgi:application"]
